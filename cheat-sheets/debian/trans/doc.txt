Темы:
* gettext
* С чего начать перевод пакета
* Перевод сайта Debian (webwml)
* Перевод man страниц (manpages-l10n)
* Рекомендации по переводу
* Этапы перевода


--- gettext
$ apt-get install gettext

Пакет `gettext` используется для интернационализации (i18n) и локализации (l10n)
программного обеспечения. Он предоставляет средства для перевода строк текста в
приложениях, что позволяет разработчикам создавать программы, которые могут
отображать интерфейс на различных языках без изменения исходного кода.

1. В исходном коде программы строки, которые должны быть переведены,
оборачиваются в специальные функции, такие как gettext() или `_()`. Например:

	#include <stdio.h>
	#include <libintl.h>
	#include <locale.h>

	#define _(STRING) gettext(STRING)

	int main() {
	    setlocale(LC_ALL, "");
	    bindtextdomain("myprogram", "/usr/share/locale");
	    textdomain("myprogram");

	    // если локально в проекте
	    //bindtextdomain("myprogram", "locale");

	    printf(_("Test message\n"));
	    return 0;
	}

2. Нужно использовать `xgettext`, который создаст messages.pot файл
(извлечь все строки, подлежащие переводу).

$ xgettext -k_ file.c

3. Файл messages.pot переименовывается в файл для целевого языка, например
ru.po, в этом файле уже можно добавлять переводы строк и изменить шапку файла
(описание).

$ mv messages.pot ru.po

	msgid "Hello, world!"
	msgstr "Привет, мир!"

4. Компиляция ru.po в бинарный файл.

$ msgfmt ru.po -o myprogram.mo
$ mv myprogram.po /usr/share/locale/ru/LC_MESSAGES

myprogram.mo - это бинарный файл, который содержит переводы для вашего
приложения. Когда ваша программа запускается, она загружает этот файл в память,
чтобы использовать переводы строк на нужном языке.

5. Запустить бинарный файл.

$ LANGUAGE=ru_RU.UTF-8 ./a.out
Тест сообщение

В выводе `strace` можно увидеть, что происходит чтение различных файлов из
`/usr/share/locale/ru/LC_MESSAGES`


--- С чего начать перевод пакета
1. Выбрать пакет для перевода: https://www.debian.org/international/l10n/po/ru

2. Почтовая рассылка: debian-l10n-russian@lists.debian.org - обсуждаются
   вопросы перевода.

3. Добавить перевод и отправить патч на проверку в список рассылки

4. Затем создать Merge Request, либо в виде патча для BTS
(использовать `reportbug`) поставить -> (важность: wishlist, тэги: l10n, patch)
и передать инструкции, которые нужно выполнить для включения в пакет.

Для темы тикета можно использовать такой паттерн:
Subject: [INTL:ru] Translation into Russian for the package <package>

Перед созданием тикета или Merge Request, необходимо отправить патч в список
рассылки для проверки с использованием псевдоссылок:
https://www.debian.org/international/l10n/pseudo-urls


--- Перевод сайта Debian (webwml)
$ git clone https://salsa.debian.org/webmaster-team/webwml
Сделать изменения + отправить на проверку в список рассылки, затем создать Merge Request
debian-l10n-russian@lists.debian.org и debian-www@lists.debian.org.

Если нужен полный доступ на запись, необходимо добавить SSH ключи и попросить
доступа к репозиторию через рассылку debian-www@lists.debian.org. Необходимо
немного рассказать о себе, заинтересовать, за какие компоненты сайта вы будете
отвечать? проявить активность и показать свои коммиты.

Полезная информация:
https://www.debian.org/devel/website/translating
https://www.debian.org/devel/website/using_git

Полезные инструменты:
$ ./check_trans.pl russian/
$ ./check_links.pl russian/


--- Перевод man страниц (manpages-l10n)
$ git clone https://salsa.debian.org/manpages-l10n-team/manpages-l10n
Этот проект охватывает значительное количество man страниц, которые часто
используются и важны. Основная цель проекта - поддерживать и обновлять
переводы, чтобы пользователи могли легко получать справочную информацию
на своем родном языке.

Например, пакеты, которые относятся к этому проекту:
manpages
manpages-ru
manpages-<locale>
и т.д.

В директори `po/` лежат полезные инструменты:
$ update-translations.sh ru/
$ update-common.sh ru/
$ format-po.sh ru/
$ show-stats.sh ru/man1/intro.1.po
$ show-needed-updates.sh ru/


--- Рекомендации по переводу
* Основная рабочая кодировка - UTF-8.
* Местоимение 'вы' пишется со строчной буквы. Пример: Теперь вы можете отформатировать диск.
* Множественное число слова 'сервер' - 'серверы'.
* Букву 'ё' не следует заменять буквой 'е'.
* Длинное тире в текстах записывается именно длинным тире '— '
* Желательно употреблять обезличенную форму обращения в предложениях.
* Используйте правильные кавычки-ёлочки: « »
* BTS надо переводить как 'система отслеживания ошибок'.


--- Этапы перевода
[TAF] сообщение от координатора о том, что данный документ необходимо перевести
  |
  +-- [ITT] приславший это сообщение сообщает что берётся за перевод
        |
        +-- [RFR] запрос корректуры
              |
              +-- Re: [RFR] замечания по переводу
              |
              +-- .........
              |
              +-- Re: [RFR] замечания по переводу
              |
              +-- [LCFC] перевод готов и скоро будет отправлен в репозиторий
                     |
                     +-- [DONE] перевод отправлен в репозиторий

На практике используются лишь два тега: [RFR] и [DONE]
